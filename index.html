<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Dorsz 5.0 – Miły Programista 50Y</title>
<style>
  body {
    margin:0; padding:0;
    font-family: 'Segoe UI', Tahoma, sans-serif;
    background-color: #111;
    color: #eee;
  }
  #container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    max-width: 900px;
    margin: 0 auto;
  }
  #chat {
    flex: 1;
    overflow-y: auto;
    padding: 20px;
    background: #1c1c1c;
    border-bottom: 1px solid #333;
  }
  .msg { margin:10px 0; line-height:1.5; }
  .user { color:#4fc3f7; }
  .ai { color:#81c784; white-space:pre-wrap; background:#222; padding:10px; border-radius:6px; }
  #input-container {
    display: flex;
    padding: 10px;
    background: #1c1c1c;
    border-top: 1px solid #333;
  }
  input {
    flex: 1;
    padding: 12px;
    border-radius: 6px;
    border:none;
    margin-right:10px;
    font-size:16px;
    background:#2c2c2c;
    color:#fff;
  }
  button {
    padding:12px 18px;
    border-radius:6px;
    border:none;
    background:#4fc3f7;
    color:#000;
    font-weight:bold;
    cursor:pointer;
  }
  button:hover { background:#36a0d1; }
</style>
</head>
<body>
<div id="container">
  <div id="chat"></div>
  <div id="input-container">
    <input id="input" placeholder="Wklej kod lub opisz problem..." />
    <button onclick="send()">Wyślij</button>
  </div>
</div>

<script>
// ==================
// STAN DORSZA 5.0
// ==================
const DORSZ = {
  mode: "help", // help | normal | admin
  memory: []
};

// ==================
// FUNKCJA PRZETWARZAJĄCA WIADOMOŚĆ
// ==================
function processMessage(text) {
  text = text.trim();
  DORSZ.memory.push(text);

  // KOMENDY SYSTEMOWE
  if(text === "/status") return `Dorsz 5.0: Tryb ${DORSZ.mode}, gotowy do pomocy.`;
  if(text === "/help") return "Komendy: /status /help /mode";
  if(text.startsWith("/mode")) {
    const parts = text.split(" ");
    if(parts[1] && ["help","normal","admin"].includes(parts[1])) {
      DORSZ.mode = parts[1];
      return "Tryb zmieniony na: " + DORSZ.mode;
    } else return "Dostępne tryby: help, normal, admin";
  }

  // Główna logika
  if(DORSZ.mode === "help") return handleHelpMode(text);
  if(DORSZ.mode === "normal") return handleNormalMode(text);
  if(DORSZ.mode === "admin") return handleAdminMode(text);

  return "Nieznana sytuacja.";
}

// ==================
// TRYB HELP – miły, naprawiający błędy
// ==================
function handleHelpMode(text) {
  const lower = text.toLowerCase();

  // JS/HTML/CSS
  if(lower.includes("html") || lower.includes("js") || lower.includes("css")) {
    return `Widzę, że chcesz użyć JS/HTML/CSS. Oto przykład działający i poprawny:\n\n<!DOCTYPE html>\n<html>\n<body>\n<button onclick="alert('Dorsz 5.0 działa!')">Kliknij</button>\n</body>\n</html>\n\nJeżeli wkleisz swój kod, poprawię go krok po kroku i wyjaśnię zmiany w miły sposób.`;
  }

  // Minecraft / Plugin / JAR
  if(lower.includes("minecraft") || lower.includes("mc") || lower.includes("jar")) {
    return "Dorsz 5.0: Podaj wersję serwera i fragment kodu pluginu (Java lub dekompilowany JAR), a poprawię go bez błędów i wyjaśnię krok po kroku.";
  }

  // Naprawa kodu
  if(lower.includes("napraw") || lower.includes("error") || lower.includes("błąd")) {
    return "Wklej fragment kodu, a Dorsz 5.0 sprawdzi go, poprawi i wyjaśni wszystkie zmiany w miły sposób.";
  }

  return "Nie mogę rozpoznać problemu w pełni. Podaj więcej szczegółów lub fragment kodu.";
}

// ==================
// TRYB NORMALNY – szybkie wskazówki
// ==================
function handleNormalMode(text) {
  if(text.toLowerCase().includes("cześć")) return "Cześć! Napisz dokładnie, w czym mogę Ci pomóc.";
  return "Nie rozumiem. Użyj /help, aby zobaczyć dostępne komendy.";
}

// ==================
// TRYB ADMIN – pamięć i diagnostyka
// ==================
function handleAdminMode(text) {
  if(text.toLowerCase().includes("pamięć")) {
    return "Ostatnie wpisy:\n" + DORSZ.memory.slice(-10).join("\n");
  }
  return "Tryb admin: komendy /status /pamięć";
}

// ==================
// INTERFEJS CZATU
// ==================
function send() {
  const input = document.getElementById("input");
  const chat = document.getElementById("chat");

  const userMsg = input.value;
  if(!userMsg) return;

  chat.innerHTML += `<div class="msg user">> ${userMsg}</div>`;

  const reply = processMessage(userMsg);
  chat.innerHTML += `<div class="msg ai">${reply}</div>`;

  input.value = "";
  chat.scrollTop = chat.scrollHeight;
}
</script>
</body>
</html>
