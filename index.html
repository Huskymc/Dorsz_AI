<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dorsz AI - JS Only</title>
<style>
body{margin:0;font-family:sans-serif;background:#f5f5f5;}
#container{display:flex;height:100vh;}
#sidebar{width:250px;background:#202123;color:#fff;padding:20px;display:flex;flex-direction:column;}
#sidebar h2{margin-bottom:20px;}
#sidebar button{margin-bottom:10px;padding:10px;border:none;border-radius:5px;background:#3e3f41;color:#fff;cursor:pointer;}
#sidebar button:hover{background:#5a5b5d;}
#chat{flex:1;display:flex;flex-direction:column;background:#f7f7f8;}
#messages{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;}
.message{max-width:70%;padding:10px 15px;margin-bottom:10px;border-radius:12px;word-wrap:break-word;line-height:1.4;}
.user{align-self:flex-end;background:#4f9aff;color:#fff;border-bottom-right-radius:0;}
.ai{align-self:flex-start;background:#e5e5ea;color:#000;border-bottom-left-radius:0;}
#inputArea{display:flex;padding:15px;background:#fff;border-top:1px solid #ccc;}
#inputArea input{flex:1;padding:12px;border-radius:20px;border:1px solid #ccc;outline:none;font-size:14px;}
#inputArea button{margin-left:10px;padding:12px 18px;border:none;border-radius:50%;background:#4f9aff;color:#fff;cursor:pointer;font-size:20px;}
#inputArea button:hover{background:#2979ff;}
#imageContainer{padding:15px;background:#fff;border-top:1px solid #ccc;text-align:center;}
#imageContainer canvas{max-width:100%;border-radius:10px;border:1px solid #ccc;}
</style>
</head>
<body>
<div id="container">
    <div id="sidebar">
        <h2>Dorsz AI</h2>
        <button onclick="newConversation()">+ Nowa rozmowa</button>
        <button onclick="generateImage()">üñºÔ∏è Generuj obraz</button>
    </div>
    <div id="chat">
        <div id="messages"></div>
        <div id="inputArea">
            <input type="text" id="userInput" placeholder="Napisz wiadomo≈õƒá..." />
            <button onclick="sendMessage()">‚û§</button>
        </div>
        <div id="imageContainer">
            <canvas id="imageCanvas" width="512" height="512"></canvas>
        </div>
    </div>
</div>

<script>
const messagesEl=document.getElementById('messages');
const inputEl=document.getElementById('userInput');
const canvas=document.getElementById('imageCanvas');
const ctx=canvas.getContext('2d');

let history=[];

function appendMessage(text,sender){
    const div=document.createElement('div');
    div.className='message '+sender;
    div.textContent=text;
    messagesEl.appendChild(div);
    messagesEl.scrollTop=messagesEl.scrollHeight;
}

function sendMessage(){
    const text=inputEl.value.trim();
    if(!text) return;
    appendMessage(text,'user');
    inputEl.value='';
    history.push({role:'user',text});

    // Symulacja AI
    let reply = generateAIReply(text);
    appendMessage(reply,'ai');
    history.push({role:'ai',text:reply});
}

function newConversation(){
    messagesEl.innerHTML='';
    ctx.clearRect(0,0,canvas.width,canvas.height);
    history=[];
}

function generateAIReply(input){
    const text=input.toLowerCase();
    if(text.includes("cze≈õƒá")||text.includes("hej")||text.includes("siema")) return "Siema! üëã Jak leci?";
    if(text.includes("kim jeste≈õ")) return "Jestem Dorsz AI ‚Äì dzia≈Çam w czystym JS w przeglƒÖdarce!";
    if(text.includes("pomoc")) return "Mogƒô odpowiadaƒá, t≈Çumaczyƒá, generowaƒá kod, tworzyƒá obrazy i pamiƒôtaƒá historiƒô rozmowy.";
    if(text.includes("obraz")||text.includes("narysuj")) return "Kliknij przycisk 'Generuj obraz' aby zobaczyƒá obraz.";
    return "Rozumiem sens, ale potrzebujƒô wiƒôcej informacji.";
}

// ====== GENERATOR OBRAZ√ìW ======
function generateImage(){
    const width=canvas.width;
    const height=canvas.height;
    // gradient t≈Ça
    const grad=ctx.createLinearGradient(0,0,width,height);
    grad.addColorStop(0,randomColor());
    grad.addColorStop(1,randomColor());
    ctx.fillStyle=grad;
    ctx.fillRect(0,0,width,height);

    // losowe kszta≈Çty
    for(let i=0;i<50;i++){
        ctx.fillStyle=randomColor();
        ctx.beginPath();
        ctx.arc(Math.random()*width,Math.random()*height,Math.random()*50,0,Math.PI*2);
        ctx.fill();
    }
}

function randomColor(){
    const r=Math.floor(Math.random()*256);
    const g=Math.floor(Math.random()*256);
    const b=Math.floor(Math.random()*256);
    return `rgb(${r},${g},${b})`;
}
</script>
</body>
</html>
