<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Dorsz AI 2.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:Arial,sans-serif;background:#0e0e0e;color:#fff;display:flex;height:100vh;}
#sidebar{width:260px;background:#151515;padding:10px;display:flex;flex-direction:column;}
#sidebar h2{margin-bottom:10px;}
#sidebar button{margin-bottom:5px;padding:10px;background:#1f1f1f;color:#fff;border:none;cursor:pointer;}
#sidebar button:hover{background:#2a2a2a;}
#main{flex:1;display:flex;flex-direction:column;}
#topbar{height:50px;background:#111;display:flex;align-items:center;justify-content:space-between;padding:0 10px;border-bottom:1px solid #222;}
#chat{flex:1;padding:15px;overflow-y:auto;}
.msg{margin-bottom:12px;padding:10px;border-radius:6px;max-width:80%;}
.user{background:#1e3a5f;align-self:flex-end;}
.assistant{background:#1f1f1f;align-self:flex-start;}
#inputBar{display:flex;border-top:1px solid #222;}
#input{flex:1;padding:12px;background:#111;color:#fff;border:none;outline:none;font-size:15px;}
#sendBtn{padding:12px 20px;background:#2b2b2b;color:#fff;border:none;cursor:pointer;}
#sendBtn:hover{background:#3a3a3a;}
canvas{margin-top:10px;border:1px solid #444;border-radius:6px;}
</style>
</head>

<body>

<div id="sidebar">
<h2>üêü Dorsz AI</h2>
<button onclick="newChat()">‚ûï Nowy czat</button>
<button onclick="setMode('chat')">üí¨ Czat</button>
<button onclick="setMode('image')">üñºÔ∏è Obrazy</button>
</div>

<div id="main">
<div id="topbar"><div>Dorsz AI 2.0</div><div></div></div>

<div id="chat"></div>

<div id="inputBar">
<input id="input" placeholder="Napisz do Dorsza‚Ä¶" />
<button id="sendBtn" onclick="sendMessage()">Wy≈õlij</button>
</div>
</div>

<script>
const chat=document.getElementById("chat");
const input=document.getElementById("input");
let memory=[];
let isThinking=false;
let mode="chat";

// ENTER
input.addEventListener("keydown", e=>{
  if(e.key==="Enter"&&!e.shiftKey){e.preventDefault();sendMessage();}
});

// dodaj wiadomo≈õƒá
function addMessage(role,text){
  const div=document.createElement("div");
  div.className="msg "+role;
  if(typeof text==="string"){
    div.textContent=text;
  }else{
    div.appendChild(text); // np. canvas
  }
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
}

// funkcja AI
function analyze(text){
  const t=text.toLowerCase();

  if(mode==="image") return generateImage();

  // powitania
  if(/hej|siemka|siema|elo|cze≈õƒá|witaj/.test(t))
    return randomResponse(["Hej! üëã W czym mogƒô pom√≥c?", "Cze≈õƒá! Co s≈Çychaƒá?", "Hej, gotowy do dzia≈Çania!"]);

  // pro≈õby o pomoc
  if(/potrzebujƒô pomocy|nie wiem|nie wiem jak|nie umiem|helpp|pomocy|pls|szefie/.test(t))
    return randomResponse([
      "Spokojnie üôÇ. Opisz dok≈Çadnie, co potrzebujesz, a krok po kroku Ci pomogƒô.",
      "Jasne! Powiedz wiƒôcej szczeg√≥≈Ç√≥w, a razem rozwiƒÖ≈ºemy problem.",
      "Nie ma sprawy, opisz sytuacjƒô, a podpowiem co zrobiƒá."
    ]);

  // techniczne
  if(t.includes("plugin")) return "Na jakƒÖ wersjƒô? Paper, Spigot, Velocity?";
  if(t.includes("skrypt")) return "Jaki skrypt chcesz zrobiƒá? Java, JS, HTML, Minecraft, plugin?";
  if(t.includes("b≈ÇƒÖd") || t.includes("error")) return "Wklej kod albo logi ‚Äì przeanalizujƒô.";
  if(t.includes("html")) return "Chcesz ca≈Çy plik HTML czy tylko fragment?";
  if(t.includes("java")) return "Jaka wersja Javy i co dok≈Çadnie nie dzia≈Ça?";

  // test
  if(t==="test") return "To jest wiadomo≈õƒá testowa ‚úÖ";

  // absolutnie ka≈ºda inna wiadomo≈õƒá
  return randomResponse([
    "Rozumiem! Opisz dok≈Çadniej, co potrzebujesz, a krok po kroku Ci pomogƒô üôÇ",
    "Hm, jasne. Mo≈ºesz mi powiedzieƒá wiƒôcej o tym problemie?",
    "Ok, jestem gotowy pom√≥c. Podaj szczeg√≥≈Çy.",
    "Rozumiem, mo≈ºemy to rozwiƒÖzaƒá razem. Co dok≈Çadnie chcesz zrobiƒá?",
    "InteresujƒÖce! Opisz proszƒô wiƒôcej, ≈ºebym m√≥g≈Ç pom√≥c."
  ]);
}

// helper losowej odpowiedzi
function randomResponse(list){
  return list[Math.floor(Math.random()*list.length)];
}

// generowanie prostego obrazu
function generateImage(){
  const c=document.createElement("canvas");
  c.width=360;c.height=180;
  const x=c.getContext("2d");
  x.fillStyle="#333";x.fillRect(0,0,c.width,c.height);
  x.fillStyle="#fff";x.font="18px Arial";
  x.fillText("Obraz ‚Äì Dorsz AI",20,90);
  return c;
}

// wy≈õlij wiadomo≈õƒá
function sendMessage(){
  if(isThinking) return;
  const text=input.value.trim();
  if(!text) return;
  addMessage("user",text);
  memory.push({role:"user",text});
  input.value="";

  isThinking=true;
  const div=document.createElement("div");
  div.className="msg assistant";
  div.textContent="Analizujƒô‚Ä¶";
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;

  setTimeout(()=>{
    const reply=analyze(text);
    if(typeof reply==="string"){
      let idx=0;
      const interval=setInterval(()=>{
        div.textContent=reply.slice(0, idx+1);
        chat.scrollTop=chat.scrollHeight;
        idx++;
        if(idx>=reply.length){clearInterval(interval);memory.push({role:"assistant",text:reply});isThinking=false;}
      },25);
    }else{
      div.textContent="";
      div.appendChild(reply);
      chat.scrollTop=chat.scrollHeight;
      memory.push({role:"assistant",text:"[obraz]"});
      isThinking=false;
    }
  },200);
}

// nowy czat
function newChat(){
  chat.innerHTML="";
  memory=[];
  addMessage("assistant","Nowy czat. W czym mogƒô pom√≥c?");
}

// tryb
function setMode(m){mode=m;addMessage("assistant","Tryb: "+(m==="image"?"Obrazy":"Czat"));}

// start
addMessage("assistant","Hej! Jestem Dorsz AI üêü Jak mogƒô pom√≥c?");
</script>

</body>
</html>
