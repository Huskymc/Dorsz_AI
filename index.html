<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Dorsz 4.0 – Miły Programista 50Y</title>
<style>
body { background:#0e0e0e; color:#fff; font-family:Arial; }
#chat { max-width:800px; margin:30px auto; padding:10px; height:500px; border:1px solid #444; overflow-y:auto; background:#1a1a1a; }
.msg { margin:10px 0; line-height:1.4; }
.user { color:#4fc3f7; }
.ai { color:#81c784; white-space:pre-wrap; }
input { width:75%; padding:10px; margin-right:5px; border-radius:4px; border:none; }
button { padding:10px 15px; border-radius:4px; border:none; background:#4fc3f7; color:#000; cursor:pointer; }
button:hover { background:#36a0d1; }
</style>
</head>
<body>

<div id="chat"></div>
<input id="input" placeholder="Opisz problem lub wklej kod..." />
<button onclick="send()">Wyślij</button>

<script>
// ==================
// STAN DORSZA
// ==================
const DORSZ = {
  mode: "help", // help | normal | admin
  memory: []
};

// ==================
// FUNKCJA POMOCY
// ==================
function processMessage(text) {
  text = text.trim();
  DORSZ.memory.push(text);

  // KOMENDY
  if(text === "/status") return `Dorsz 4.0: Tryb ${DORSZ.mode}, gotowy do pomocy.`;
  if(text === "/help") return "Komendy: /status /help /mode";
  if(text.startsWith("/mode")) {
    const parts = text.split(" ");
    if(parts[1] && ["help","normal","admin"].includes(parts[1])) {
      DORSZ.mode = parts[1];
      return "Tryb zmieniony na: " + DORSZ.mode;
    } else return "Dostępne tryby: help, normal, admin";
  }

  // LOGIKA POMOCY
  if(DORSZ.mode === "help") return handleHelpMode(text);
  if(DORSZ.mode === "normal") return handleNormalMode(text);
  if(DORSZ.mode === "admin") return handleAdminMode(text);

  return "Nieznana sytuacja.";
}

// ==================
// TRYB HELP – miły, naprawiający błędy
// ==================
function handleHelpMode(text) {
  const lower = text.toLowerCase();

  // JS/HTML
  if(lower.includes("html") || lower.includes("js")) {
    return `Widzę, że chcesz użyć JS/HTML. Oto działający przykład:\n\n<!DOCTYPE html>\n<html>\n<body>\n<button onclick="alert('Dorsz działa!')">Kliknij</button>\n</body>\n</html>\n\nJeżeli coś w tym nie działa, wklej swój kod, a poprawię go krok po kroku.`;
  }

  // MC Plugin / JAR
  if(lower.includes("minecraft") || lower.includes("mc") || lower.includes("jar")) {
    return "Dorsz 4.0: Podaj wersję serwera i fragment kodu pluginu, a poprawię go bez błędów i wyjaśnię krok po kroku.";
  }

  // Naprawa kodu
  if(lower.includes("napraw") || lower.includes("error") || lower.includes("błąd")) {
    return "Wklej fragment kodu, a Dorsz 4.0 sprawdzi, poprawi i wyjaśni każdą zmianę.";
  }

  return "Nie mogę rozpoznać problemu w pełni. Proszę podać więcej szczegółów lub fragment kodu.";
}

// ==================
// TRYB NORMALNY – szybkie wskazówki
// ==================
function handleNormalMode(text) {
  if(text.toLowerCase().includes("cześć")) return "Cześć! Napisz dokładnie, w czym mogę pomóc.";
  return "Nie rozumiem. Użyj /help, aby zobaczyć dostępne komendy.";
}

// ==================
// TRYB ADMIN – pamięć i diagnostyka
// ==================
function handleAdminMode(text) {
  if(text.toLowerCase().includes("pamięć")) {
    return "Ostatnie wpisy:\n" + DORSZ.memory.slice(-10).join("\n");
  }
  return "Tryb admin: komendy /status /pamięć";
}

// ==================
// INTERFEJS
// ==================
function send() {
  const input = document.getElementById("input");
  const chat = document.getElementById("chat");

  const userMsg = input.value;
  if(!userMsg) return;

  chat.innerHTML += `<div class="msg user">> ${userMsg}</div>`;

  const reply = processMessage(userMsg);
  chat.innerHTML += `<div class="msg ai">${reply}</div>`;

  input.value = "";
  chat.scrollTop = chat.scrollHeight;
}
</script>

</body>
</html>
