<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Dorsz 1.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:#0f0f0f;color:#eaeaea;font-family:Segoe UI,Arial}

#app{display:flex;height:100%}

/* SIDEBAR */
#sidebar{
  width:260px;
  background:#151515;
  border-right:1px solid #2a2a2a;
  display:flex;
  flex-direction:column;
  transition:.3s;
}
#sidebar.collapsed{width:60px}

#logo{
  padding:14px;
  font-size:20px;
  font-weight:700;
  text-align:center;
  color:#4fc3f7;
}

#newChat{
  margin:10px;
  padding:10px;
  background:#4fc3f7;
  border:none;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
  color:#000;
}

#search{
  margin:10px;
  padding:8px;
  border-radius:6px;
  border:none;
  background:#222;
  color:#fff;
}

#chatList{
  flex:1;
  overflow-y:auto;
}

.chatItem{
  padding:10px 14px;
  cursor:pointer;
  border-bottom:1px solid #1f1f1f;
}
.chatItem:hover{background:#1f1f1f}

/* MAIN */
#main{flex:1;display:flex;flex-direction:column}

/* TOP BAR */
#topbar{
  height:50px;
  border-bottom:1px solid #2a2a2a;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 15px;
}

#topActions button{
  margin-left:8px;
  background:#222;
  color:#fff;
  border:none;
  padding:6px 10px;
  border-radius:6px;
  cursor:pointer;
}

/* CHAT */
#chat{
  flex:1;
  padding:20px;
  overflow-y:auto;
}

.msg{margin-bottom:14px}
.user{color:#4fc3f7}
.ai{
  background:#1b1b1b;
  padding:12px;
  border-radius:10px;
  position:relative;
}
.copy{
  position:absolute;
  top:6px;
  right:8px;
  background:none;
  border:none;
  color:#aaa;
  cursor:pointer;
}

/* INPUT */
#inputBar{
  border-top:1px solid #2a2a2a;
  padding:10px;
  display:flex;
  gap:8px;
}

#plus{
  background:#4fc3f7;
  border:none;
  border-radius:50%;
  width:42px;
  height:42px;
  font-size:22px;
  cursor:pointer;
  color:#000;
}

#input{
  flex:1;
  background:#1f1f1f;
  border:none;
  border-radius:10px;
  padding:12px;
  color:#fff;
  font-size:16px;
}

#send{
  background:#4fc3f7;
  border:none;
  border-radius:10px;
  padding:0 18px;
  cursor:pointer;
  font-weight:700;
  color:#000;
}

/* IMAGE */
.canvasWrap{
  margin-top:10px;
}
</style>
</head>

<body>
<div id="app">

<!-- SIDEBAR -->
<div id="sidebar">
  <div id="logo">üêü Dorsz</div>
  <button id="newChat">+ Nowy czat</button>
  <input id="search" placeholder="Szukaj czatu">
  <div id="chatList"></div>
</div>

<!-- MAIN -->
<div id="main">

<!-- TOP BAR -->
<div id="topbar">
  <div>Dorsz 1.0</div>
  <div id="topActions">
    <button>Udostƒôpnij</button>
    <button>Dodaj osobƒô</button>
    <button>‚ãÆ</button>
  </div>
</div>

<!-- CHAT -->
<div id="chat"></div>

<!-- INPUT -->
<div id="inputBar">
  <button id="plus">+</button>
  <input id="input" placeholder="Napisz do Dorsza...">
  <button id="send">Wy≈õlij</button>
</div>

</div>
</div>

<script>
const chatEl=document.getElementById("chat");
const input=document.getElementById("input");
const sendBtn=document.getElementById("send");
const plusBtn=document.getElementById("plus");

function addMsg(from,text){
  const d=document.createElement("div");
  d.className="msg "+from;
  if(from==="ai"){
    d.innerHTML=`<div class="ai">${text}<button class="copy">üìã</button></div>`;
    d.querySelector(".copy").onclick=()=>navigator.clipboard.writeText(text);
  }else{
    d.textContent=text;
  }
  chatEl.appendChild(d);
  chatEl.scrollTop=chatEl.scrollHeight;
}

function generateImage(){
  const c=document.createElement("canvas");
  c.width=360;c.height=180;
  const x=c.getContext("2d");
  x.fillStyle="#333";x.fillRect(0,0,c.width,c.height);
  x.fillStyle="#fff";x.font="18px Arial";
  x.fillText("Obraz wygenerowany przez Dorsza 1.0",10,90);
  const wrap=document.createElement("div");
  wrap.className="canvasWrap";
  wrap.appendChild(c);
  chatEl.appendChild(wrap);
}

function dorszLogic(text){
  if(text.match(/<|function|var|let|const/))
    return "Przeanalizowa≈Çem kod. Sk≈Çadnia jest poprawna, ale mo≈ºna poprawiƒá czytelno≈õƒá i zabezpieczenia.";
  if(text.toLowerCase().includes("obraz")){
    generateImage();
    return "Wygenerowa≈Çem obraz lokalnie.";
  }
  return `Analizujƒô: "${text}". Jestem got√≥w naprawiƒá kod, stworzyƒá plugin, HTML albo skrypt.`;
}

sendBtn.onclick=send;
input.addEventListener("keydown",e=>{if(e.key==="Enter")send();});

function send(){
  const t=input.value.trim();
  if(!t)return;
  addMsg("user",t);
  input.value="";
  setTimeout(()=>addMsg("ai",dorszLogic(t)),200);
}

plusBtn.onclick=()=>{
  const a=prompt("1 ‚Äì nowy czat | 2 ‚Äì obraz | 3 ‚Äì plik");
  if(a==="2")generateImage();
}
</script>
</body>
</html>
